<div class="container">

    <h1>Footsteps</h1>

    <h4>A new way to interact with your surroundings!</h4>

    <div class="row col-centered" id="google">
        <div class="g-signin2" id="google" data-onsuccess="onSignIn" data-theme="dark"></div>
    </div>
</div>

<p id="demo">Get location</p>

<button onclick="getLocation()">Find Me</button>

<div id="mapholder"></div>

<script src="https://maps.google.com/maps/api/js?key=AIzaSyBv9IwBfXhHmsYFgboNzIdGpT76YTSCB7c"></script>

<style>
    img{
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
        height: 100vh;
        width: 100vw;
    }

    h1{
        text-align: center;
    }

    h4{
        text-align: center;
    }

    .col-centered{
        float: none;
        margin: 0 auto;
    }
</style>

<script>
	function onSignIn(googleUser) {
		var profile = googleUser.getBasicProfile();
		console.log("ID: " + profile.getId());
		console.log('Full Name: ' + profile.getName());
		console.log('Given Name: ' + profile.getGivenName());
		console.log('Family Name: ' + profile.getFamilyName());
		console.log("Image URL: " + profile.getImageUrl());
		console.log("Email: " + profile.getEmail());

		// The ID token you need to pass to your backend:
		var id_token = googleUser.getAuthResponse().id_token;
		console.log("ID Token: " + id_token);
	}

	function signOut() {
		var auth2 = gapi.auth2.getAuthInstance();
		auth2.signOut().then(function () {
			console.log('User signed out.');
		});
	}

	var x = document.getElementById("demo");
	function getLocation() {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(showPosition, showError);
		} else {
			x.innerHTML = "Geolocation is not supported by this browser.";
		}
	}

	function showPosition(position) {
		var lat = position.coords.latitude;
		var lon = position.coords.longitude;
		var latlon = new google.maps.LatLng(lat, lon);
		var mapholder = document.getElementById('mapholder');
		mapholder.style.height = '350px';
		mapholder.style.width = '400px';

		var myOptions = {
			center:latlon,zoom:14,
			mapTypeId:google.maps.MapTypeId.ROADMAP,
			mapTypeControl:false,
			navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}
		}

		var map = new google.maps.Map(document.getElementById("mapholder"), myOptions);
		var marker = new google.maps.Marker({position:latlon,map:map,title:"You are here!"});
	}

	function showError(error) {
		switch(error.code) {
			case error.PERMISSION_DENIED:
				x.innerHTML = "User denied the request for Geolocation.";
				break;
			case error.POSITION_UNAVAILABLE:
				x.innerHTML = "Location information is unavailable.";
				break;
			case error.TIMEOUT:
				x.innerHTML = "The request to get user location timed out.";
				break;
			case error.UNKNOWN_ERROR:
				x.innerHTML = "An unknown error occurred.";
				break;
		}
	}
</script>
